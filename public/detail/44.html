<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>

<!-- Mirrored from blog.dev.3d66.com/detail/44.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 08 Jul 2025 08:22:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>Weui upLoader - 小罗博客</title>
	<link href="../public/Home/css/bootstrap.css" rel='stylesheet' type='text/css' />
	<link href="../public/Home/css/style.css" rel='stylesheet' type='text/css' />
	<link href="../public/Home/css/base.css" rel='stylesheet' type='text/css' />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="Weui upLoader - Weui upLoader - 小罗博客" />
	<meta name="description" content="Weui upLoader - Weui upLoader - 小罗博客" />
	<!----webfonts---->
		<!----//webfonts---->
		  <script src="../public/Home/js/jquery.min.js"></script>
		<!--end slider -->
		<!--script-->
<!--/script-->
<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event){		
					event.preventDefault();
					$('html,body').animate({scrollTop:$(this.hash).offset().top},900);
				});
			});
</script>
<!---->

</head>
<body>
<!---header---->			
<div class="header">  
	<div class="header_top">
		<div class="container">
			<div class="header_top_l">
				<p>Hi！欢迎来到 <span class="author">咖啡屋的少年（小罗）</span> 的博客<span class="qq_group">技术交流QQ群：上海php（592152335）、代码改变世界（453011886）</span></p>
			</div>
			<div class="header_top_r">
				<!-- <p>
					<a href="/login.html">登录</a>
					<a href="/register.html">注册</a>
				</p> -->
			</div>
		</div>
	</div>
	 <div class="container" style="margin-bottom:20px">
		  <div class="logo">
			  <a href="index.html"><img src="../public/Home/images/logo.png" title="" /></a>
		  </div>
			 <!---start-top-nav---->
			 <div class="top-menu">
				 
				  <span class="menu"> </span>
				   <ul>
						<li class="active"><a href="../index.html">首页</a></li>
						<li ><a href="../list/PHP.html">PHP</a></li>
						<li ><a href="../list/HTML.html">前端</a></li>
						<li ><a href="../list/linux.html">Linux</a></li>
						<li ><a href="../list/Seo.html">SEO</a></li>
						<li ><a href="../list/mysql.html">MySql</a></li>
						<li ><a href="../list/redis.html">Redis</a></li>
						<li ><a href="../list/Other.html">其他</a></li>
						<div class="clearfix"> </div>
				 </ul>
			 </div>
			 <div class="clearfix"></div>
					<script>
					$("span.menu").click(function(){
						$(".top-menu ul").slideToggle("slow" , function(){
						});
					});
					</script>
				<!---//End-top-nav---->					
	 </div>
</div>

    
<!--/header-->
<div class="content">
	 <div class="container">
		 <div class="content-grids">
			 <div class="col-md-8 content-main">
				 <div class="content-grid">
				 	<h4 class="detail-title">Weui upLoader</h4>
				 	<div class="detail-time">
				 		<p class="post-info-time">2017-09-16 13:14:24 <span>依然范儿特西</span>阅读(0) <span>点赞(0)</span> <span>评论(0)</span></p>
				 	</div>
				 					 		<p class="reprint">本文为转载文章，如有侵权，请联系博主。原文链接：<a href="http://www.cnblogs.com/richerdyoung/p/6770198.html" target="_black">http://www.cnblogs.com/richerdyoung/p/6770198.html</a></p>
				 						<div class="detail_div">
						<div class="cnblogs_code">
<pre><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">=&quot;en&quot;</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">=&quot;UTF-8&quot;</span> <span style="color: #0000ff">/&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">id</span><span style="color: #0000ff">=&quot;viewport&quot;</span><span style="color: #ff0000"> name</span><span style="color: #0000ff">=&quot;viewport&quot;</span><span style="color: #ff0000"> content</span><span style="color: #0000ff">=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>WeUI-Uploader<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">link </span><span style="color: #ff0000">rel</span><span style="color: #0000ff">=&quot;stylesheet&quot;</span><span style="color: #ff0000"> href</span><span style="color: #0000ff">=&quot;https://res.wx.qq.com/open/libs/weui/0.3.0/weui.css&quot;</span> <span style="color: #0000ff">/&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;container&quot;</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_cells_title&quot;</span><span style="color: #0000ff">&gt;</span>&#x4E0A;&#x4F20;<span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_cells weui_cells_form&quot;</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_cell&quot;</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_cell_bd weui_cell_primary&quot;</span><span style="color: #0000ff">&gt;</span>
          <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_uploader&quot;</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_uploader_hd weui_cell&quot;</span><span style="color: #0000ff">&gt;</span>
              <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_cell_bd weui_cell_primary&quot;</span><span style="color: #0000ff">&gt;</span>&#x56FE;&#x7247;&#x4E0A;&#x4F20;<span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
              <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_cell_ft js_counter&quot;</span><span style="color: #0000ff">&gt;</span>0/6<span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_uploader_bd&quot;</span><span style="color: #0000ff">&gt;</span>
              <span style="color: #0000ff">&lt;</span><span style="color: #800000">ul </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_uploader_files&quot;</span><span style="color: #0000ff">&gt;</span>
                <span style="color: #008000">&lt;!--</span><span style="color: #008000"> &#x9884;&#x89C8;&#x56FE;&#x63D2;&#x5165;&#x5230;&#x8FD9; </span><span style="color: #008000">--&gt;</span> <span style="color: #0000ff">&lt;/</span><span style="color: #800000">ul</span><span style="color: #0000ff">&gt;</span>
              <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_uploader_input_wrp&quot;</span><span style="color: #0000ff">&gt;</span>
                <span style="color: #0000ff">&lt;</span><span style="color: #800000">input </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_uploader_input js_file&quot;</span><span style="color: #ff0000"> type</span><span style="color: #0000ff">=&quot;file&quot;</span><span style="color: #ff0000"> accept</span><span style="color: #0000ff">=&quot;image/jpg,image/jpeg,image/png,image/gif&quot;</span><span style="color: #ff0000"> multiple</span><span style="color: #0000ff">=&quot;&quot;</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
          <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_dialog_alert&quot;</span><span style="color: #ff0000"> style</span><span style="color: #0000ff">=&quot;display: none;&quot;</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_mask&quot;</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_dialog&quot;</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_dialog_hd&quot;</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">strong </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_dialog_title&quot;</span><span style="color: #0000ff">&gt;</span>&#x8B66;&#x544A;<span style="color: #0000ff">&lt;/</span><span style="color: #800000">strong</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_dialog_bd&quot;</span><span style="color: #0000ff">&gt;</span>&#x5F39;&#x7A97;&#x5185;&#x5BB9;&#xFF0C;&#x544A;&#x77E5;&#x5F53;&#x524D;&#x9875;&#x9762;&#x4FE1;&#x606F;&#x7B49;<span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;weui_dialog_ft&quot;</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">a </span><span style="color: #ff0000">href</span><span style="color: #0000ff">=&quot;javascript:;&quot;</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">=&quot;weui_btn_dialog primary&quot;</span><span style="color: #0000ff">&gt;</span>&#x786E;&#x5B9A;<span style="color: #0000ff">&lt;/</span><span style="color: #800000">a</span><span style="color: #0000ff">&gt;</span>
      <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">script </span><span style="color: #ff0000">src</span><span style="color: #0000ff">=&quot;https://cdn.bootcss.com/zepto/1.1.6/zepto.min.js&quot;</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">script</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">script</span><span style="color: #0000ff">&gt;</span><span style="background-color: #f5f5f5; color: #000000">  
  $.weui </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> {};  
  $.weui.alert </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000">(options){  
    options </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> $.extend({title: </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&#x8B66;&#x544A;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, text: </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&#x8B66;&#x544A;&#x5185;&#x5BB9;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">}, options);  
    </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> $alert </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> $(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_dialog_alert</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">);  
    $alert.find(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_dialog_title</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).text(options.title);  
    $alert.find(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_dialog_bd</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).text(options.text);  
    $alert.on(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">touchend click</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_btn_dialog</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000">(){  
      $alert.hide();  
    });  
    $alert.show();  
  };  
  
  $(</span><span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000"> () {  
    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x5141;&#x8BB8;&#x4E0A;&#x4F20;&#x7684;&#x56FE;&#x7247;&#x7C7B;&#x578B;  </span>
    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> allowTypes </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> [</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">image/jpg</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">image/jpeg</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">image/png</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">image/gif</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">];  
    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> 1024KB&#xFF0C;&#x4E5F;&#x5C31;&#x662F; 1MB  </span>
    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> maxSize </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #000000">1024</span> <span style="background-color: #f5f5f5; color: #000000">*</span> <span style="background-color: #f5f5f5; color: #000000">1024</span><span style="background-color: #f5f5f5; color: #000000">;  
    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x56FE;&#x7247;&#x6700;&#x5927;&#x5BBD;&#x5EA6;  </span>
    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> maxWidth </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #000000">300</span><span style="background-color: #f5f5f5; color: #000000">;  
    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x6700;&#x5927;&#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x6570;&#x91CF;  </span>
    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> maxCount </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #000000">6</span><span style="background-color: #f5f5f5; color: #000000">;  
    $(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.js_file</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).on(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">change</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000"> (event) {  
      </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> files </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> event.target.files;  
      
        </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x5982;&#x679C;&#x6CA1;&#x6709;&#x9009;&#x4E2D;&#x6587;&#x4EF6;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;  </span>
        <span style="background-color: #f5f5f5; color: #0000ff">if</span><span style="background-color: #f5f5f5; color: #000000"> (files.length </span><span style="background-color: #f5f5f5; color: #000000">===</span> <span style="background-color: #f5f5f5; color: #000000">0</span><span style="background-color: #f5f5f5; color: #000000">) {  
          </span><span style="background-color: #f5f5f5; color: #0000ff">return</span><span style="background-color: #f5f5f5; color: #000000">;  
        }  
        
        </span><span style="background-color: #f5f5f5; color: #0000ff">for</span><span style="background-color: #f5f5f5; color: #000000"> (</span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> i </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #000000">0</span><span style="background-color: #f5f5f5; color: #000000">, len </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> files.length; i </span><span style="background-color: #f5f5f5; color: #000000">&lt;</span><span style="background-color: #f5f5f5; color: #000000"> len; i</span><span style="background-color: #f5f5f5; color: #000000">++</span><span style="background-color: #f5f5f5; color: #000000">) {  
          </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> file </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> files[i];  
          </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> reader </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #0000ff">new</span><span style="background-color: #f5f5f5; color: #000000"> FileReader();  
          
            </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x5982;&#x679C;&#x7C7B;&#x578B;&#x4E0D;&#x5728;&#x5141;&#x8BB8;&#x7684;&#x7C7B;&#x578B;&#x8303;&#x56F4;&#x5185;  </span>
            <span style="background-color: #f5f5f5; color: #0000ff">if</span><span style="background-color: #f5f5f5; color: #000000"> (allowTypes.indexOf(file.type) </span><span style="background-color: #f5f5f5; color: #000000">===</span> <span style="background-color: #f5f5f5; color: #000000">-</span><span style="background-color: #f5f5f5; color: #000000">1</span><span style="background-color: #f5f5f5; color: #000000">) {  
              $.weui.alert({text: </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&#x8BE5;&#x7C7B;&#x578B;&#x4E0D;&#x5141;&#x8BB8;&#x4E0A;&#x4F20;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">});  
              </span><span style="background-color: #f5f5f5; color: #0000ff">continue</span><span style="background-color: #f5f5f5; color: #000000">;  
            }  
            
            </span><span style="background-color: #f5f5f5; color: #0000ff">if</span><span style="background-color: #f5f5f5; color: #000000"> (file.size </span><span style="background-color: #f5f5f5; color: #000000">&gt;</span><span style="background-color: #f5f5f5; color: #000000"> maxSize) {  
              $.weui.alert({text: </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&#x56FE;&#x7247;&#x592A;&#x5927;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x4E0A;&#x4F20;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">});  
              </span><span style="background-color: #f5f5f5; color: #0000ff">continue</span><span style="background-color: #f5f5f5; color: #000000">;  
            }  
            
            </span><span style="background-color: #f5f5f5; color: #0000ff">if</span><span style="background-color: #f5f5f5; color: #000000"> ($(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_uploader_file</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).length </span><span style="background-color: #f5f5f5; color: #000000">&gt;=</span><span style="background-color: #f5f5f5; color: #000000"> maxCount) {  
              $.weui.alert({text: </span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&#x6700;&#x591A;&#x53EA;&#x80FD;&#x4E0A;&#x4F20;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span> <span style="background-color: #f5f5f5; color: #000000">+</span><span style="background-color: #f5f5f5; color: #000000"> maxCount </span><span style="background-color: #f5f5f5; color: #000000">+</span> <span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&#x5F20;&#x56FE;&#x7247;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">});  
              </span><span style="background-color: #f5f5f5; color: #0000ff">return</span><span style="background-color: #f5f5f5; color: #000000">;  
            }  
            
            reader.onload </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000"> (e) {  
              </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> img </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #0000ff">new</span><span style="background-color: #f5f5f5; color: #000000"> Image();  
              img.onload </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000"> () {  
                    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x4E0D;&#x8981;&#x8D85;&#x51FA;&#x6700;&#x5927;&#x5BBD;&#x5EA6;  </span>
                    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> w </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> Math.min(maxWidth, img.width);  
                    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x9AD8;&#x5EA6;&#x6309;&#x6BD4;&#x4F8B;&#x8BA1;&#x7B97;  </span>
                    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> h </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> img.height </span><span style="background-color: #f5f5f5; color: #000000">*</span><span style="background-color: #f5f5f5; color: #000000"> (w </span><span style="background-color: #f5f5f5; color: #000000">/</span><span style="background-color: #f5f5f5; color: #000000"> img.width);  
                    </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> canvas </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> document.createElement(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">canvas</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">);  
                    </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> ctx </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> canvas.getContext(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">2d</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">);  
                    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x8BBE;&#x7F6E; canvas &#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;  </span>
<span style="background-color: #f5f5f5; color: #000000">                    canvas.width </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> w;  
                    canvas.height </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> h;  
                    ctx.drawImage(img, </span><span style="background-color: #f5f5f5; color: #000000">0</span><span style="background-color: #f5f5f5; color: #000000">, </span><span style="background-color: #f5f5f5; color: #000000">0</span><span style="background-color: #f5f5f5; color: #000000">, w, h);  
                    </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> base64 </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> canvas.toDataURL(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">image/png</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">);  
                    
                    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x63D2;&#x5165;&#x5230;&#x9884;&#x89C8;&#x533A;  </span>
                    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> $preview </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> $(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">&lt;li class=&quot;weui_uploader_file weui_uploader_status&quot; style=&quot;background-image:url(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span> <span style="background-color: #f5f5f5; color: #000000">+</span><span style="background-color: #f5f5f5; color: #000000"> base64 </span><span style="background-color: #f5f5f5; color: #000000">+</span> <span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">)&quot;&gt;&lt;div class=&quot;weui_uploader_status_content&quot;&gt;0%&lt;/div&gt;&lt;/li&gt;</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">);  
                    $(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_uploader_files</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).append($preview);  
                    </span><span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> num </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> $(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_uploader_file</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).length;  
                    $(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.js_counter</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).text(num </span><span style="background-color: #f5f5f5; color: #000000">+</span> <span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">/</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span> <span style="background-color: #f5f5f5; color: #000000">+</span><span style="background-color: #f5f5f5; color: #000000"> maxCount);  
                    
                    </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x7136;&#x540E;&#x5047;&#x88C5;&#x5728;&#x4E0A;&#x4F20;&#xFF0C;&#x53EF;&#x4EE5;post base64&#x683C;&#x5F0F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6784;&#x9020;blob&#x5BF9;&#x8C61;&#x4E0A;&#x4F20;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x5FAE;&#x4FE1;JSSDK&#x4E0A;&#x4F20;  </span>
                    
                    <span style="background-color: #f5f5f5; color: #0000ff">var</span><span style="background-color: #f5f5f5; color: #000000"> progress </span><span style="background-color: #f5f5f5; color: #000000">=</span> <span style="background-color: #f5f5f5; color: #000000">0</span><span style="background-color: #f5f5f5; color: #000000">;  
                    </span><span style="background-color: #f5f5f5; color: #0000ff">function</span><span style="background-color: #f5f5f5; color: #000000"> uploading() {  
                      $preview.find(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_uploader_status_content</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).text(</span><span style="background-color: #f5f5f5; color: #000000">++</span><span style="background-color: #f5f5f5; color: #000000">progress </span><span style="background-color: #f5f5f5; color: #000000">+</span> <span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">%</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">);  
                      </span><span style="background-color: #f5f5f5; color: #0000ff">if</span><span style="background-color: #f5f5f5; color: #000000"> (progress </span><span style="background-color: #f5f5f5; color: #000000">&lt;</span> <span style="background-color: #f5f5f5; color: #000000">100</span><span style="background-color: #f5f5f5; color: #000000">) {  
                        setTimeout(uploading, </span><span style="background-color: #f5f5f5; color: #000000">30</span><span style="background-color: #f5f5f5; color: #000000">);  
                      }  
                      </span><span style="background-color: #f5f5f5; color: #0000ff">else</span><span style="background-color: #f5f5f5; color: #000000"> {  
                            </span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"> &#x5982;&#x679C;&#x662F;&#x5931;&#x8D25;&#xFF0C;&#x585E;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x56FE;&#x6807;  </span>
                            <span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000">$preview.find(&apos;.weui_uploader_status_content&apos;).html(&apos;&lt;i class=&quot;weui_icon_warn&quot;&gt;&lt;/i&gt;&apos;);  </span>
<span style="background-color: #f5f5f5; color: #000000">                            $preview.removeClass(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">weui_uploader_status</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).find(</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">.weui_uploader_status_content</span><span style="background-color: #f5f5f5; color: #000000">&apos;</span><span style="background-color: #f5f5f5; color: #000000">).remove();  
                          }  
                        }  
                        setTimeout(uploading, </span><span style="background-color: #f5f5f5; color: #000000">30</span><span style="background-color: #f5f5f5; color: #000000">);  
                      };  
                      
                      img.src </span><span style="background-color: #f5f5f5; color: #000000">=</span><span style="background-color: #f5f5f5; color: #000000"> e.target.result;  
                    };  
                    reader.readAsDataURL(file);  
                  }  
                });  
  });  
</span><span style="background-color: #f5f5f5; color: #008000">//</span><span style="background-color: #f5f5f5; color: #008000"># sourceURL=pen.js  </span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">script</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p>&#xA0;</p>
<p>&#x6548;&#x679C;&#x9884;&#x89C8;&#xFF1A;</p>
<p><img src="../../images2015.cnblogs.com/blog/1103071/201704/1103071-20170426185532131-1943624538.html" alt=""></p>
<p>&#xA0;</p>					</div> 
				 </div>
			  </div>
			<div class="col-md-4 content-right">
			  	 <div class="recent">
					 <h3>站内搜索</h3>
					 <div class="search">
						 <form action="http://blog.dev.3d66.com/search.html" method="get">
						 <input type="text" name="keywords" placeholder="请输入关键字" required="">
						 <input type="submit" value=""/>
						 </form>
					 </div>
				 </div>
				 <div class="recent">
					 <h3>热门文章</h3>
					 <ul>
													<li><a href="1.html">【go】用Golang的 http 包建立 Web 服务器</a></li>
													<li><a href="2.html">【go】go语言socket通信样例</a></li>
													<li><a href="3.html">【linux】Centos下登陆mysql报错#1045 - A</a></li>
													<li><a href="4.html">【Linux】 ftp  主动被动模式</a></li>
													<li><a href="5.html">【linux】安装rar，并解压被压缩成多个rar的文件</a></li>
													<li><a href="7.html">【Redis】php+redis实现消息队列</a></li>
													<li><a href="9.html">【PHP】 php实现字符串反转：支持中英文</a></li>
													<li><a href="11.html">【Laravel】Mac下玩转Laravel</a></li>
													<li><a href="12.html">【PHP】 判断是否微信内置浏览器</a></li>
													<li><a href="13.html">【Base64】用 js 编 解 码 base64</a></li>
											 </ul>
				 </div>
				 <div class="recent">
					 <h3>推荐文章</h3>
					 <ul>
					 								<li><a href="1.html">【go】用Golang的 http 包建立 Web 服务器</a></li>
													<li><a href="2.html">【go】go语言socket通信样例</a></li>
													<li><a href="3.html">【linux】Centos下登陆mysql报错#1045 - A</a></li>
													<li><a href="5.html">【linux】安装rar，并解压被压缩成多个rar的文件</a></li>
													<li><a href="6.html">【Linux】WinSCP普通用户登录sftp后切换到root权</a></li>
													<li><a href="8.html">【mysql】mysql front 提示Access viol</a></li>
													<li><a href="10.html">【短信接口】阿里大于迁移到阿里云之后使用方法</a></li>
													<li><a href="12.html">【PHP】 判断是否微信内置浏览器</a></li>
													<li><a href="14.html">【ecshop】调用购物车商品数量</a></li>
													<li><a href="16.html">【Twitter接口】网站嵌入推特信息</a></li>
											 </ul>
				 </div>
				 <div class="recent">
					 <h3>友情链接</h3>
					 <ul>
						<li><a href="https://www.zhaorui.info/" target="_blank">肇锐博客</a></li>
						<li><a href="https://www.fujieace.com/" target="_blank">付杰博客</a></li>
						<li><a href="http://www.cnblogs.com/richerdyoung/" target="_blank">依然范儿特西博客</a></li>
					 </ul>
				 </div>
				 <div class="clearfix"></div>
			  </div>
		  </div>
	  </div>
</div>


	


<!---->
<div class="footer">
	
	 <div class="container">
		 <p>欢迎来到小罗博客<a style="margin-left: 20px;" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">备案号：粤ICP备18091111号-1</a></p>
	 </div>
</div>	
