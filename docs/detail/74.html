<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>

<!-- Mirrored from blog.dev.3d66.com/detail/74.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 08 Jul 2025 08:22:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>thinkphp5 邮件发送（qq邮箱为例） - 小罗博客</title>
	<link href="../public/Home/css/bootstrap.css" rel='stylesheet' type='text/css' />
	<link href="../public/Home/css/style.css" rel='stylesheet' type='text/css' />
	<link href="../public/Home/css/base.css" rel='stylesheet' type='text/css' />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="thinkphp5 邮件发送（qq邮箱为例） - thinkphp5 邮件发送（qq邮箱为例） - 小罗博客" />
	<meta name="description" content="thinkphp5 邮件发送（qq邮箱为例） - thinkphp5 邮件发送（qq邮箱为例） - 小罗博客" />
	<!----webfonts---->
		<!----//webfonts---->
		  <script src="../public/Home/js/jquery.min.js"></script>
		<!--end slider -->
		<!--script-->
<!--/script-->
<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event){		
					event.preventDefault();
					$('html,body').animate({scrollTop:$(this.hash).offset().top},900);
				});
			});
</script>
<!---->

</head>
<body>
<!---header---->			
<div class="header">  
	<div class="header_top">
		<div class="container">
			<div class="header_top_l">
				<p>Hi！欢迎来到 <span class="author">咖啡屋的少年（小罗）</span> 的博客<span class="qq_group">技术交流QQ群：上海php（592152335）、代码改变世界（453011886）</span></p>
			</div>
			<div class="header_top_r">
				<!-- <p>
					<a href="/login.html">登录</a>
					<a href="/register.html">注册</a>
				</p> -->
			</div>
		</div>
	</div>
	 <div class="container" style="margin-bottom:20px">
		  <div class="logo">
			  <a href="index.html"><img src="../public/Home/images/logo.png" title="" /></a>
		  </div>
			 <!---start-top-nav---->
			 <div class="top-menu">
				 
				  <span class="menu"> </span>
				   <ul>
						<li class="active"><a href="../index.html">首页</a></li>
						<li ><a href="../list/PHP.html">PHP</a></li>
						<li ><a href="../list/HTML.html">前端</a></li>
						<li ><a href="../list/linux.html">Linux</a></li>
						<li ><a href="../list/Seo.html">SEO</a></li>
						<li ><a href="../list/mysql.html">MySql</a></li>
						<li ><a href="../list/redis.html">Redis</a></li>
						<li ><a href="../list/Other.html">其他</a></li>
						<div class="clearfix"> </div>
				 </ul>
			 </div>
			 <div class="clearfix"></div>
					<script>
					$("span.menu").click(function(){
						$(".top-menu ul").slideToggle("slow" , function(){
						});
					});
					</script>
				<!---//End-top-nav---->					
	 </div>
</div>

    
<!--/header-->
<div class="content">
	 <div class="container">
		 <div class="content-grids">
			 <div class="col-md-8 content-main">
				 <div class="content-grid">
				 	<h4 class="detail-title">thinkphp5 邮件发送（qq邮箱为例）</h4>
				 	<div class="detail-time">
				 		<p class="post-info-time">2017-09-16 13:14:24 <span>依然范儿特西</span>阅读(0) <span>点赞(0)</span> <span>评论(0)</span></p>
				 	</div>
				 					 		<p class="reprint">本文为转载文章，如有侵权，请联系博主。原文链接：<a href="http://www.cnblogs.com/richerdyoung/p/6489924.html" target="_black">http://www.cnblogs.com/richerdyoung/p/6489924.html</a></p>
				 						<div class="detail_div">
						<p>&#x4E00;&#x3001;&#x9996;&#x5148;&#x9700;&#x8981;&#x4F60;&#x5F00;&#x542F;smtp &#x670D;&#x52A1;&#xFF0C;&#x767B;&#x5F55;qq&#x90AE;&#x7BB1;&#xFF0C;&#x8FDB;&#x5165;&#x8BBE;&#x7F6E; -&#x300B; &#x8D26;&#x6237; &#xA0;&#xA0;</p>
<p><img src="../../images2015.cnblogs.com/blog/1103071/201703/1103071-20170302113940891-357046515.html" alt=""></p>
<p><span style="color: #ff0000">&#x6CE8;&#x610F;&#xFF1A; &#x5F00;&#x542F;&#x540E;&#x4F1A;&#x751F;&#x6210;&#x6388;&#x6743;&#x7801;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x8BB0;&#x4E0B;&#xFF0C;&#x4E24;&#x4E2A;&#x90FD;&#x8BB0;&#x4E0B;&#xFF0C;&#x767B;&#x5F55;&#x90AE;&#x4EF6;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x3002;&#x8FD9;&#x91CC;&#x914D;&#x7F6E;&#x90AE;&#x4EF6;&#x53D1;&#x9001;&#x4E5F;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6388;&#x6743;&#x7801;</span></p>
<p>&#xA0;</p>
<p>&#x4E8C;&#x3001; &#x4E0B;&#x8F7D;phpmailer, &#xA0;&#x7136;&#x540E;&#x5728;thinkphp5 &#x76EE;&#x5F55;&#x4E0B;&#x7684; &#xA0;&#x6269;&#x5C55;&#x7C7B;&#x5E93; extend&#x76EE;&#x5F55;&#x4E0B;&#xA0;&#x65B0;&#x5EFA;phpmailer&#x76EE;&#x5F55;&#x3002;&#x3002;</p>
<p>&#xA0;&#x628A;&#x4F60;&#x4E0B;&#x8F7D;&#x7684;phpmailer&#x91CC;&#x7684;class.phpmailer.PHP&#x548C;class.smtp.php&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;phpmailer&#x76EE;&#x5F55;&#x4E0B;&#x3002;</p>
<p><span style="color: #ff0000; background-color: #ffffff">&#x6CE8;&#x610F;&#xFF1A;thinkphp5&#x7684;&#x6269;&#x5C55;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;&#x662F;&#xFF0C;&#x7C7B;&#x6587;&#x4EF6;&#x547D;&#x540D;&#x4E3A;&#xFF1A;phpmailer.php&#x800C;&#x4E0D;&#x662F;class.phpmailer.php&#x3002;&#x6240;&#x4EE5;&#x8981;&#x628A;class.phpmailer.php&#x91CD;&#x547D;&#x540D;&#x4E3A;phpmailer.php&#x3002; &#x53E6;&#x4E00;&#x4E2A;&#x4E0D;&#x7528;&#x6539;</span>&#x3002;</p>
<p>&#xA0;</p>
<p>&#x4E09;&#x3001;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;:</p>
<p>1&#x3002; &#x5F00;&#x542F;openssl&#x6269;&#x5C55;</p>
<p>2 &#x3002;extend&#x4E0B;&#x7684;&#x6269;&#x5C55;&#x7C7B;&#x5E93;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5FC5;&#x987B;&#x5728;phpmailer.php&#x548C;class.smtp.php&#x6700;&#x5F00;&#x5934;&#x52A0;&#x4E0A;</p>
<div class="cnblogs_code">
<pre>namespace phpmailer;</pre>
</div>
<p>3&#x3002;&#x5728;phpmailer.php&#x4E2D;&#x7684;2315&#x884C;&#x4F7F;&#x7528;&#x5230;&#x4E86;php&#x7684;Exception&#x5F02;&#x5E38;&#x7C7B;&#xFF0C;&#x5728;thinkphp&#x6846;&#x67B6;&#x4E2D;&#x76F4;&#x63A5;&#x7EE7;&#x627F;&#xFF0C;thinkphp&#x627E;&#x4E0D;&#x5230;Exception&#x6240;&#x4EE5;&#x8981;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF1B;</p>
<p><img src="../../images2015.cnblogs.com/blog/1103071/201703/1103071-20170302115211938-753613577.html" alt=""></p>
<p>4&#x3002;&#xA0;&#x5728;&#x4F7F;&#x7528;phpmailer&#x65F6;&#xFF0C;&#x5B9E;&#x4F8B;&#x5316;PHPMailer()&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x547D;&#x540D;&#x7A7A;&#x95F4;</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">use</span> phpmailer\phpmailer;</pre>
</div>
<p>5&#x3002; &#x7136;&#x540E;&#x5728;index&#x6A21;&#x5757;&#x4E0B;&#x65B0;&#x5EFA;Mail.php&#x63A7;&#x5236;&#x5668;,&#x4EE3;&#x7801;&#x5982;&#x4E0B;</p>
<div class="cnblogs_code">
<pre>&lt;?<span style="color: #000000">php
namespace app\index\controller;
</span><span style="color: #0000ff">use</span><span style="color: #000000">  think\Controller;   </span><span style="color: #0000ff">use</span><span style="color: #000000">  phpmailer\phpmailer;
</span><span style="color: #0000ff">class</span> <span style="color: #008080">Mail</span> <span style="color: #0000ff">extends</span><span style="color: #000000"> Base
{
     
    </span><span style="color: #0000ff">function</span><span style="color: #000000"> __construct(){
        parent</span>::<span style="color: #000000">__construct();
    }
    </span><span style="color: #008000">//</span><span style="color: #008000">qq</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span><span style="color: #000000"> index(){
            </span><span style="color: #800080">$sendmail</span> = &apos;&apos;; <span style="color: #008000">//</span><span style="color: #008000">&#x53D1;&#x4EF6;&#x4EBA;&#x90AE;&#x7BB1;</span>
            <span style="color: #800080">$sendmailpswd</span> = &quot;&quot;; <span style="color: #008000">//</span><span style="color: #008000">&#x5BA2;&#x6237;&#x7AEF;&#x6388;&#x6743;&#x5BC6;&#x7801;,&#x800C;&#x4E0D;&#x662F;&#x90AE;&#x7BB1;&#x7684;&#x767B;&#x5F55;&#x5BC6;&#x7801;&#xFF01;</span>
            <span style="color: #800080">$send_name</span> = &apos;&apos;;<span style="color: #008000">//</span><span style="color: #008000"> &#x8BBE;&#x7F6E;&#x53D1;&#x4EF6;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x90AE;&#x4EF6;&#x683C;&#x5F0F;&#x8BF4;&#x660E;&#x4E2D;&#x7684;&#x53D1;&#x4EF6;&#x4EBA;&#xFF0C;</span>
            <span style="color: #800080">$toemail</span> = &apos;&apos;;<span style="color: #008000">//</span><span style="color: #008000">&#x5B9A;&#x4E49;&#x6536;&#x4EF6;&#x4EBA;&#x7684;&#x90AE;&#x7BB1;</span>
            <span style="color: #800080">$to_name</span> = &apos;&apos;;<span style="color: #008000">//</span><span style="color: #008000">&#x8BBE;&#x7F6E;&#x6536;&#x4EF6;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x90AE;&#x4EF6;&#x683C;&#x5F0F;&#x8BF4;&#x660E;&#x4E2D;&#x7684;&#x6536;&#x4EF6;&#x4EBA;</span>
            <span style="color: #800080">$mail</span> = <span style="color: #0000ff">new</span><span style="color: #000000"> PHPMailer();  
            </span><span style="color: #800080">$mail</span>-&gt;isSMTP();<span style="color: #008000">//</span><span style="color: #008000"> &#x4F7F;&#x7528;SMTP&#x670D;&#x52A1;  </span>
            <span style="color: #800080">$mail</span>-&gt;CharSet = &quot;utf8&quot;;<span style="color: #008000">//</span><span style="color: #008000"> &#x7F16;&#x7801;&#x683C;&#x5F0F;&#x4E3A;utf8&#xFF0C;&#x4E0D;&#x8BBE;&#x7F6E;&#x7F16;&#x7801;&#x7684;&#x8BDD;&#xFF0C;&#x4E2D;&#x6587;&#x4F1A;&#x51FA;&#x73B0;&#x4E71;&#x7801;  </span>
            <span style="color: #800080">$mail</span>-&gt;Host = &quot;smtp.qq.com&quot;;<span style="color: #008000">//</span><span style="color: #008000"> &#x53D1;&#x9001;&#x65B9;&#x7684;SMTP&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;  </span>
            <span style="color: #800080">$mail</span>-&gt;SMTPAuth = <span style="color: #0000ff">true</span>;<span style="color: #008000">//</span><span style="color: #008000"> &#x662F;&#x5426;&#x4F7F;&#x7528;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;  </span>
            <span style="color: #800080">$mail</span>-&gt;Username = <span style="color: #800080">$sendmail</span>;<span style="color: #008000">//</span><span style="color: #008000">// &#x53D1;&#x9001;&#x65B9;&#x7684;</span>
            <span style="color: #800080">$mail</span>-&gt;Password = <span style="color: #800080">$sendmailpswd</span>;<span style="color: #008000">//</span><span style="color: #008000">&#x5BA2;&#x6237;&#x7AEF;&#x6388;&#x6743;&#x5BC6;&#x7801;,&#x800C;&#x4E0D;&#x662F;&#x90AE;&#x7BB1;&#x7684;&#x767B;&#x5F55;&#x5BC6;&#x7801;&#xFF01;</span>
            <span style="color: #800080">$mail</span>-&gt;SMTPSecure = &quot;ssl&quot;;<span style="color: #008000">//</span><span style="color: #008000"> &#x4F7F;&#x7528;ssl&#x534F;&#x8BAE;&#x65B9;&#x5F0F; </span>
            <span style="color: #800080">$mail</span>-&gt;Port = 465;<span style="color: #008000">//</span><span style="color: #008000">  qq&#x7AEF;&#x53E3;465&#x6216;587&#xFF09;</span>
            <span style="color: #800080">$mail</span>-&gt;setFrom(<span style="color: #800080">$sendmail</span>,<span style="color: #800080">$send_name</span>);<span style="color: #008000">//</span><span style="color: #008000"> &#x8BBE;&#x7F6E;&#x53D1;&#x4EF6;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x90AE;&#x4EF6;&#x683C;&#x5F0F;&#x8BF4;&#x660E;&#x4E2D;&#x7684;&#x53D1;&#x4EF6;&#x4EBA;&#xFF0C;</span>
            <span style="color: #800080">$mail</span>-&gt;addAddress(<span style="color: #800080">$toemail</span>,<span style="color: #800080">$to_name</span>);<span style="color: #008000">//</span><span style="color: #008000"> &#x8BBE;&#x7F6E;&#x6536;&#x4EF6;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x90AE;&#x4EF6;&#x683C;&#x5F0F;&#x8BF4;&#x660E;&#x4E2D;&#x7684;&#x6536;&#x4EF6;&#x4EBA;&#xFF0C;  </span>
            <span style="color: #800080">$mail</span>-&gt;addReplyTo(<span style="color: #800080">$sendmail</span>,<span style="color: #800080">$send_name</span>);<span style="color: #008000">//</span><span style="color: #008000"> &#x8BBE;&#x7F6E;&#x56DE;&#x590D;&#x4EBA;&#x4FE1;&#x606F;&#xFF0C;&#x6307;&#x7684;&#x662F;&#x6536;&#x4EF6;&#x4EBA;&#x6536;&#x5230;&#x90AE;&#x4EF6;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x56DE;&#x590D;&#xFF0C;&#x56DE;&#x590D;&#x90AE;&#x4EF6;&#x5C06;&#x53D1;&#x9001;&#x5230;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;  
            //$mail-&gt;addCC(&quot;xxx@qq.com&quot;);// &#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x6284;&#x9001;&#x4EBA;&#xFF0C;&#x53EF;&#x4EE5;&#x53EA;&#x5199;&#x5730;&#x5740;&#xFF0C;&#x4E0A;&#x8FF0;&#x7684;&#x8BBE;&#x7F6E;&#x4E5F;&#x53EF;&#x4EE5;&#x53EA;&#x5199;&#x5730;&#x5740;(&#x8FD9;&#x4E2A;&#x4EBA;&#x4E5F;&#x80FD;&#x6536;&#x5230;&#x90AE;&#x4EF6;)  
            //$mail-&gt;addBCC(&quot;xxx@qq.com&quot;);// &#x8BBE;&#x7F6E;&#x79D8;&#x5BC6;&#x6284;&#x9001;&#x4EBA;(&#x8FD9;&#x4E2A;&#x4EBA;&#x4E5F;&#x80FD;&#x6536;&#x5230;&#x90AE;&#x4EF6;)  
            //$mail-&gt;addAttachment(&quot;bug0.jpg&quot;);// &#x6DFB;&#x52A0;&#x9644;&#x4EF6;  </span>
            <span style="color: #800080">$mail</span>-&gt;Subject = &quot;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x90AE;&#x4EF6;&quot;;<span style="color: #008000">//</span><span style="color: #008000"> &#x90AE;&#x4EF6;&#x6807;&#x9898;  </span>
            <span style="color: #800080">$mail</span>-&gt;Body = &quot;&#x90AE;&#x4EF6;&#x5185;&#x5BB9;&#x662F; &lt;b&gt;&#x60A8;&#x7684;&#x9A8C;&#x8BC1;&#x7801;&#x662F;&#xFF1A;123456&lt;/b&gt;&#xFF0C;&#x54C8;&#x54C8;&#x54C8;&#xFF01;&quot;;<span style="color: #008000">//</span><span style="color: #008000"> &#x90AE;&#x4EF6;&#x6B63;&#x6587;  
            //$mail-&gt;AltBody = &quot;This is the plain text&#x7EAF;&#x6587;&#x672C;&quot;;// &#x8FD9;&#x4E2A;&#x662F;&#x8BBE;&#x7F6E;&#x7EAF;&#x6587;&#x672C;&#x65B9;&#x5F0F;&#x663E;&#x793A;&#x7684;&#x6B63;&#x6587;&#x5185;&#x5BB9;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x652F;&#x6301;Html&#x65B9;&#x5F0F;&#xFF0C;&#x5C31;&#x4F1A;&#x7528;&#x5230;&#x8FD9;&#x4E2A;&#xFF0C;&#x57FA;&#x672C;&#x65E0;&#x7528;  </span>
  
            <span style="color: #0000ff">if</span>(!<span style="color: #800080">$mail</span>-&gt;send()){<span style="color: #008000">//</span><span style="color: #008000"> &#x53D1;&#x9001;&#x90AE;&#x4EF6;  </span>
                <span style="color: #0000ff">echo</span> &quot;Message could not be sent.&quot;<span style="color: #000000">;  
                </span><span style="color: #0000ff">echo</span> &quot;Mailer Error: &quot;.<span style="color: #800080">$mail</span>-&gt;ErrorInfo;<span style="color: #008000">//</span><span style="color: #008000"> &#x8F93;&#x51FA;&#x9519;&#x8BEF;&#x4FE1;&#x606F;  </span>
            }<span style="color: #0000ff">else</span><span style="color: #000000">{  
                </span><span style="color: #0000ff">echo</span> &apos;&#x53D1;&#x9001;&#x6210;&#x529F;&apos;<span style="color: #000000">;  
            }  

    }

}</span></pre>
</div>
<p>&#xA0;</p>					</div> 
				 </div>
			  </div>
			<div class="col-md-4 content-right">
			  	 <div class="recent">
					 <h3>站内搜索</h3>
					 <div class="search">
						 <form action="http://blog.dev.3d66.com/search.html" method="get">
						 <input type="text" name="keywords" placeholder="请输入关键字" required="">
						 <input type="submit" value=""/>
						 </form>
					 </div>
				 </div>
				 <div class="recent">
					 <h3>热门文章</h3>
					 <ul>
													<li><a href="1.html">【go】用Golang的 http 包建立 Web 服务器</a></li>
													<li><a href="2.html">【go】go语言socket通信样例</a></li>
													<li><a href="3.html">【linux】Centos下登陆mysql报错#1045 - A</a></li>
													<li><a href="4.html">【Linux】 ftp  主动被动模式</a></li>
													<li><a href="5.html">【linux】安装rar，并解压被压缩成多个rar的文件</a></li>
													<li><a href="7.html">【Redis】php+redis实现消息队列</a></li>
													<li><a href="9.html">【PHP】 php实现字符串反转：支持中英文</a></li>
													<li><a href="11.html">【Laravel】Mac下玩转Laravel</a></li>
													<li><a href="12.html">【PHP】 判断是否微信内置浏览器</a></li>
													<li><a href="13.html">【Base64】用 js 编 解 码 base64</a></li>
											 </ul>
				 </div>
				 <div class="recent">
					 <h3>推荐文章</h3>
					 <ul>
					 								<li><a href="1.html">【go】用Golang的 http 包建立 Web 服务器</a></li>
													<li><a href="2.html">【go】go语言socket通信样例</a></li>
													<li><a href="3.html">【linux】Centos下登陆mysql报错#1045 - A</a></li>
													<li><a href="5.html">【linux】安装rar，并解压被压缩成多个rar的文件</a></li>
													<li><a href="6.html">【Linux】WinSCP普通用户登录sftp后切换到root权</a></li>
													<li><a href="8.html">【mysql】mysql front 提示Access viol</a></li>
													<li><a href="10.html">【短信接口】阿里大于迁移到阿里云之后使用方法</a></li>
													<li><a href="12.html">【PHP】 判断是否微信内置浏览器</a></li>
													<li><a href="14.html">【ecshop】调用购物车商品数量</a></li>
													<li><a href="16.html">【Twitter接口】网站嵌入推特信息</a></li>
											 </ul>
				 </div>
				 <div class="recent">
					 <h3>友情链接</h3>
					 <ul>
						<li><a href="https://www.zhaorui.info/" target="_blank">肇锐博客</a></li>
						<li><a href="https://www.fujieace.com/" target="_blank">付杰博客</a></li>
						<li><a href="http://www.cnblogs.com/richerdyoung/" target="_blank">依然范儿特西博客</a></li>
					 </ul>
				 </div>
				 <div class="clearfix"></div>
			  </div>
		  </div>
	  </div>
</div>


	


<!---->
<div class="footer">
	
	 <div class="container">
		 <p>欢迎来到小罗博客<a style="margin-left: 20px;" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">备案号：粤ICP备18091111号-1</a></p>
	 </div>
</div>	
